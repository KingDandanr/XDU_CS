# 《计算机组织与体系结构》实验

## 实验一  存储器实验

**一．实验目的**

1、掌握FPGA中lpm_ROM只读存储器配置方法。

2、用文本编辑器编辑mif文件配置ROM，加载于ROM中；

3、验证FPGA中mega_lpm_ROM的功能。

**二．实验原理**

   ALTERA的FPGA中有许多可调用的LPM (Library Parameterized Modules)参数化的模块库，可构成如lpm_rom、lpm_ram_io、lpm_fifo、lpm_ram_dq的存储器结构。CPU中的重要部件，如RAM、ROM可直接调用他们构成，因此在FPGA中利用嵌入式阵列块EAB可以构成各种结构的存储器，lpm_ROM是其中的一种。lpm_ROM有3组信号：地址信号address[ ]、数据信号q[ ]、时钟信号clk。由于ROM是只读存储器，所以它的数据口是单向的输出端口，ROM中的数据是在对FPGA现场配置时，通过配置文件一起写入存储单元

**三．实验步骤**

1.用图形编辑，进入mega_lpm元件库，调用lpm_rom元件，设置地址总线宽度a[]和数据总线宽度q[]，分别为6位和8位,并添加输入输出引脚

<img src="file:///D:\QQ文件\573228907\Image\C2C\780ea1b4b75e3a776b8c6c95049ac658.jpg" alt="img" style="zoom: 33%;" />	<img src="file:///D:\QQ文件\573228907\Image\C2C\76ad74fb0022b61040d6a0c29afeaa10.jpg" alt="img" style="zoom:50%;" />

2.波形仿真:打开QuartusII，选File -> New other files -> Vector Waveform File，点击OK进入仿真界面。

<img src="file:///D:\QQ文件\573228907\Image\C2C\89a3a8a59724a164171d183308bc1528.jpg" alt="img" style="zoom: 33%;" />	

3.引脚锁定:

选择菜单Assignments->pins->Location,根据实验电路结构图NO.0和芯片引脚对照表, 查出a[5..0]，clk ，[7..0] 在核心芯片EP3C40Q240C8上所对应的引脚号

4.下载 验证：

将电脑与实验箱通过并口连接接好，点快捷键 ，在出现的lpm_rom.sof文件上， 选中program/configure点快捷键 。 即可设计下载到FPGA中。最后是用实验箱进行硬件测试。

## 实验二  运算器实验

**一．实验目的**

 了解简单运算器的数据传输通路。

 验证运算功能发生器的组合功能。

 掌握算术逻辑运算加、减、与的工作原理。

**二．实验内容**

1．实验原理

   算术逻辑单元运算器ALU181根据74LS181的功能，用VHDL硬件描述语言编辑而成，构成8位字长的ALU。参加运算的两个8位数据分别为A[7..0]和B[7..0]，运算模式由S[3..0]的16种组合决定，S[3..0]的值由4位2进制计数器LPM_COUNTER产生，计数时钟是Sclk（图2-1）；此外，设M=0，选择算术运算，M=1为逻辑运算，CN为低位的进位位；F[7..0]为输出结果，CO为运算后的输出进位位。两个8位数据由总线IN[7..0]分别通过两个电平锁存器74373锁入，ALU功能如表所示。

<img src="C:\Users\王舒贤\AppData\Roaming\Typora\typora-user-images\image-20240605165852602.png" alt="image-20240605165852602" style="zoom:50%;" />	

**三．实验步骤** 

（1）以原理图方式建立顶层文件工程

选择图形方式，电路图，从Quartus II的基本元件库中将各元件调入图形编辑窗口、连线，添加输入输出引脚。

![img](file:///D:\QQ文件\573228907\Image\C2C\31253ed5a2c14a8741113f2b4d467fda.jpg)	

（2）设计ALU元件

在Quartus II 环境下，编辑器Text Editor输入ALU181.VHD算术逻辑单元文件，并将文件制作成一个可调用的原理图元件。

（3）芯片编程Programming

打开编程窗口。将配置文件ALU.sof下载到FPGA中。

<img src="file:///D:\QQ文件\573228907\Image\C2C\15e3bdab1366fe49ebc6b803b6761bce.jpg" alt="img" style="zoom:50%;" />	

（4）选择实验系统的电路模式是NO.0，验证ALU的运算器的算术运算和逻辑运算功能

根据表2-1，从键盘输入数据A[7..0]和B[7..0]，并设置S[3..0]、M、Cy，验证ALU运算器的算术运算和逻辑运算功能，记录实验数据。

![img](file:///D:\QQ文件\573228907\Image\C2C\5bb0fe361da95681b46958cbc18cf2df.jpg)

## 实验三  节拍脉冲发生器时序电路实验

**一．实验目的**

（1）掌握节拍脉冲发生器的设计方法和工作原理。  

（2）理解节拍脉冲发生器的工作原理。

**二．实验原理**

​      计算机之所以能够按照人们事先规定的顺序进行一系列的操作或运算，就是因为它的控制部分能够按一定的先后顺序正确地发出一系列相应的控制信号。这就要求计算机必须有时序电路。控制信号就是根据时序信号产生的。本实验说明时序电路中节拍脉冲发生器的工作原理。

单步/连续运行电路

![	](C:\Users\王舒贤\AppData\Roaming\Typora\typora-user-images\image-20240605171049952.png)	

•单步/连续运行电路工作波形

![image-20240605171557214](C:\Users\王舒贤\AppData\Roaming\Typora\typora-user-images\image-20240605171557214.png)

## 实验四  程序计数器PC和地址寄存器AR

**一．实验目的**

1．掌握地址单元的工作原理。

2．掌握的两种工作方式，加1计数和重装计数器初值的实现方法；

3．掌握地址寄存器从程序计数器获得数据和从内部总线获得数据的实现方法。

**二．实验原理**

  地址单元主要由三部分组成：程序计数器、地址寄存器和多路开关。

   程序计数器PC用以指出下一条指令在主存中的存放地址，CPU正是根据PC的内容去存取指令的。因程序中指令是顺序执行的，所以PC有自增功能。程序计数器提供下一条程序指令的地址，在T4时钟脉冲的作用下具有自动加1的功能；在LDPC信号的作用下可以预置计数器的初值（如子程序调用或中断响应等）。当LDPC为高电平时，计数器装入data[ ]端输入的数据。aclr是计数器的清0端，高电平有效（高电平清零）；aclr为低电平时，允许计数器正常计数。

**电路图如下**

![](C:\Users\王舒贤\AppData\Roaming\Typora\typora-user-images\image-20240605171911061.png)**波形图如下：**

![](file:///D:\QQ文件\573228907\Image\C2C\024b5cc54205d22a431c38122dcc06cb.jpg)

**问题回答如下**

<img src="D:\QQ文件\573228907\FileRecv\实验\实验_0.jpg" alt="实验_0" style="zoom: 33%;" />	<img src="D:\QQ文件\573228907\FileRecv\实验\实验_1.jpg" alt="实验_1" style="zoom: 25%;" />

## 实验五  总线控制实验

**一．实验目的**

1．理解总线的概念及特性。

2．掌握总线传输控制特性。

**二．实验原理**

  总线是多个系统部件之间进行数据传输的公共通路，是构成计算机系统的骨架。借助总线连接，计算机在系统各部件之间实现传送地址、数据和控制信息的操作。所谓总线就是指能为多个功能部件服务的一组公用信息线。

​		![img](file:///D:\QQ文件\573228907\Image\C2C\b16abd7a1a35b140e4c56eb79931c77d.jpg)

**三．实验内容**

根据挂在总线上的几个基本部件，设计一个简单的流程。

1.输入设备将数据打入寄存器R0。

2.输入设备将另一个数据打入地址寄存器AR。

3.将寄存器R0中的数据写到当前地址的存储器中。

4.将当前地址的存储器中的数用数码管显示。

<img src="D:\QQ文件\573228907\FileRecv\总线\总线_1.jpg" alt="总线_1" style="zoom:50%;" />	

**波形图如下：**

![img](file:///D:\QQ文件\573228907\Image\C2C\2c752ac193b3255248f361a3e124e63b.jpg)